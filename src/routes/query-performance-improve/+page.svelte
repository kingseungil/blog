<!-- auto-generated by QWER -->
<script lang="ts">
  /* eslint-disable @typescript-eslint/ban-ts-comment */
  // @ts-nocheck
  import Post from '$lib/layouts/post.svelte';
  import ImgZoom from '$lib/components/image_zoom.svelte';
  import Video from '$lib/components/video.svelte';
  import CodeCopy from '$lib/components/code_copy.svelte';
  import InfoBox from '$lib/components/info_box.svelte';
</script>

<Post>
  <article slot="post_content">
    <h1 id=""><a href="#">들어가기 앞서</a></h1>
    <InfoBox statusType="info" statusName="개발환경">
      <ul>
        <li>Spring Boot 3.2.2</li>
        <li>MySQL 8.0.26</li>
        <li>QueryDSL 5.0.0</li>
      </ul>
    </InfoBox>
    <p>
      <a href="https://github.com/let-eat-go/backend" rel="external">프로젝트</a>
      를 진행하면서 쿼리 성능을 향상시키기 위해 고민하고 적용한 방법에 대해 정리해보려고 합니다.
    </p>
    <p>
      쿼리는 <code class="inline-code-block">QueryDSL</code>
      로 작성했고, RDBMS는
      <code class="inline-code-block">MySQL</code>
      을 사용했습니다.
    </p>
    <hr />
    <h2 id=""><a href="#">테스트를 위한 데이터 삽입</a></h2>
    <p>우선 테스트를 하기 위해 DB Procedure를 만들어 테스트 데이터를 삽입해보겠습니다.</p>
    <div class="code-block titled">
      <h2 class="code-title">Procedure 생성</h2>
      <CodeCopy>
        <pre><code
            class="language-sql">{@html String.raw`<div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token comment"># TastyRestaurant 데이터 생성하는 프로시저</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">create</span> <span class="token keyword">procedure</span> tastyrestaurantdata<span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">begin</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">declare</span> i <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">1</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">while</span> i <span class="token operator">&lt;=</span> <span class="token number">100000</span> <span class="token keyword">do</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">insert</span> <span class="token keyword">into</span> tasty_restaurant <span class="token punctuation">(</span> created_at<span class="token punctuation">,</span> updated_at<span class="token punctuation">,</span> api_id<span class="token punctuation">,</span> category<span class="token punctuation">,</span> land_address<span class="token punctuation">,</span> latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">,</span> name<span class="token punctuation">,</span> number_of_uses<span class="token punctuation">,</span> phone_number<span class="token punctuation">,</span> restaurant_url<span class="token punctuation">,</span> road_address<span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">VALUES</span> <span class="token punctuation">(</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FLOOR<span class="token punctuation">(</span>RAND<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000000000000000000</span><span class="token punctuation">)</span><span class="token punctuation">,</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                ELT<span class="token punctuation">(</span>CEIL<span class="token punctuation">(</span>RAND<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'SNACK'</span><span class="token punctuation">,</span> <span class="token string">'STREET_FOOD'</span><span class="token punctuation">,</span> <span class="token string">'BUFFET'</span><span class="token punctuation">,</span> <span class="token string">'PUB'</span><span class="token punctuation">,</span> <span class="token string">'ASIAN_CUISINE'</span><span class="token punctuation">,</span> <span class="token string">'WESTERN_CUISINE'</span><span class="token punctuation">,</span> <span class="token string">'JAPANESE_CUISINE'</span><span class="token punctuation">,</span> <span class="token string">'CHINESE_CUISINE'</span><span class="token punctuation">,</span> <span class="token string">'FAST_FOOD'</span><span class="token punctuation">,</span> <span class="token string">'FAMILY_RESTAURANT'</span><span class="token punctuation">,</span> <span class="token string">'PIZZA'</span><span class="token punctuation">,</span> <span class="token string">'CHICKEN'</span><span class="token punctuation">,</span> <span class="token string">'KOREAN_CUISINE'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token string">'서울시 강남구'</span><span class="token punctuation">,</span> <span class="token number">37.123456</span><span class="token punctuation">,</span> <span class="token number">127.123456</span><span class="token punctuation">,</span> CONCAT<span class="token punctuation">(</span><span class="token string">'테스트'</span><span class="token punctuation">,</span> FLOOR<span class="token punctuation">(</span>RAND<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'010-1234-5678'</span><span class="token punctuation">,</span> <span class="token string">'http://www.naver.com'</span><span class="token punctuation">,</span> <span class="token string">'서울시 강남구'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">set</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">end</span> <span class="token keyword">while</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">end</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token comment"># Meeting 데이터 생성하는 프로시저</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">create</span> <span class="token keyword">procedure</span> meetingdata<span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">begin</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">declare</span> i <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">1</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">while</span> i <span class="token operator">&lt;=</span> <span class="token number">300000</span> <span class="token keyword">do</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">insert</span> <span class="token keyword">into</span> meeting <span class="token punctuation">(</span> created_at<span class="token punctuation">,</span> updated_at<span class="token punctuation">,</span> current_participants<span class="token punctuation">,</span> description<span class="token punctuation">,</span> max_participants<span class="token punctuation">,</span> age_preference<span class="token punctuation">,</span> alcohol_preference<span class="token punctuation">,</span> gender_preference<span class="token punctuation">,</span> purpose<span class="token punctuation">,</span> <span class="token keyword">status</span><span class="token punctuation">,</span> min_participants<span class="token punctuation">,</span> name<span class="token punctuation">,</span> restaurant_category<span class="token punctuation">,</span> start_date_time<span class="token punctuation">,</span> host_id<span class="token punctuation">,</span> region_id<span class="token punctuation">,</span> tasty_restaurant_id<span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">            <span class="token keyword">values</span> <span class="token punctuation">(</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'ANY'</span> <span class="token punctuation">,</span> <span class="token string">'ANY'</span><span class="token punctuation">,</span> <span class="token string">'ANY'</span><span class="token punctuation">,</span> <span class="token string">'SOCIAL'</span><span class="token punctuation">,</span> <span class="token string">'BEFORE'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'테스트'</span><span class="token punctuation">,</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                    ELT<span class="token punctuation">(</span>CEIL<span class="token punctuation">(</span>RAND<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'SNACK'</span><span class="token punctuation">,</span> <span class="token string">'STREET_FOOD'</span><span class="token punctuation">,</span> <span class="token string">'BUFFET'</span><span class="token punctuation">,</span> <span class="token string">'PUB'</span><span class="token punctuation">,</span> <span class="token string">'ASIAN_CUISINE'</span><span class="token punctuation">,</span> <span class="token string">'WESTERN_CUISINE'</span><span class="token punctuation">,</span> <span class="token string">'JAPANESE_CUISINE'</span><span class="token punctuation">,</span> <span class="token string">'CHINESE_CUISINE'</span><span class="token punctuation">,</span> <span class="token string">'FAST_FOOD'</span><span class="token punctuation">,</span> <span class="token string">'FAMILY_RESTAURANT'</span><span class="token punctuation">,</span> <span class="token string">'PIZZA'</span><span class="token punctuation">,</span> <span class="token string">'CHICKEN'</span><span class="token punctuation">,</span> <span class="token string">'KOREAN_CUISINE'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                    <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> floor<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">set</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">end</span> <span class="token keyword">while</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">end</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token comment"># 프로시저 실행</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">call</span> meetingdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">call</span> tastyrestaurantdata<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div>`}</code></pre>
      </CodeCopy>
    </div>
    <p>
      <strong>10만개</strong>
      의
      <code class="inline-code-block">TastyRestaurant</code>
      데이터와
      <strong>30만개</strong>
      의
      <code class="inline-code-block">Meeting</code>
       데이터를 삽입했습니다.
    </p>
    <p>(대략 데이터 10만개당 6~7분이 소요됐습니다)</p>
    <h2 id="1"><a href="#1">테스트 할 쿼리1</a></h2>
    <p>
      프로젝트에서 모임목록을 조회하는 API가 있습니다. (
      <code class="inline-code-block">/api/meetings/list?page=1&amp;region=강남구&amp;category=피자</code>
      )
    </p>
    <ul>
      <li>
        <strong>카테고리</strong>
         별로 조회 가능
      </li>
      <li>
        <strong>모임 지역</strong>
         별로 조회 가능
      </li>
    </ul>
    <div class="code-block titled">
      <h2 class="code-title">최적화 전 쿼리</h2>
      <CodeCopy>
        <pre><code
            class="language-sql">{@html String.raw`<div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">select</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token comment">/* ... */</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">from</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    meeting m1_0</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">left</span> <span class="token keyword">join</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    tasty_restaurant tr1_0</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">on</span> tr1_0<span class="token punctuation">.</span>id<span class="token operator">=</span>m1_0<span class="token punctuation">.</span>tasty_restaurant_id</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">join</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    region r1_0</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">on</span> r1_0<span class="token punctuation">.</span>id<span class="token operator">=</span>m1_0<span class="token punctuation">.</span>region_id</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">where</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    m1_0<span class="token punctuation">.</span>restaurant_category<span class="token operator">=</span><span class="token string">'PUB'</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">  <span class="token operator">and</span> r1_0<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'강남구'</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">order</span> <span class="token keyword">by</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    m1_0<span class="token punctuation">.</span>created_at <span class="token keyword">desc</span><span class="token punctuation">;</span></div></div>`}</code></pre>
      </CodeCopy>
    </div>
    <p>쿼리 최적화를 하기 전 조회 API의 쿼리는 위와 같이 실행되었습니다.</p>
    <p>
      위 쿼리의 <strong>실행계획</strong>
      을 살펴봅시다. (실행계획은
      <code class="inline-code-block">explain</code>
      을 통해 확인할 수 있습니다)
    </p>
    <div class="code-block titled">
      <h2 class="code-title">실행계획 조회</h2>
      <CodeCopy>
        <pre><code
            class="language-sql">{@html String.raw`<div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">explain</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">select</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token comment">/* ... */</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">from</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    meeting m1_0</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">left</span> <span class="token keyword">join</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    tasty_restaurant tr1_0</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">on</span> tr1_0<span class="token punctuation">.</span>id<span class="token operator">=</span>m1_0<span class="token punctuation">.</span>tasty_restaurant_id</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">join</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    region r1_0</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">on</span> r1_0<span class="token punctuation">.</span>id<span class="token operator">=</span>m1_0<span class="token punctuation">.</span>region_id</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">where</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    m1_0<span class="token punctuation">.</span>restaurant_category<span class="token operator">=</span><span class="token string">'PUB'</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">  <span class="token operator">and</span> r1_0<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'강남구'</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">order</span> <span class="token keyword">by</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    m1_0<span class="token punctuation">.</span>created_at <span class="token keyword">desc</span><span class="token punctuation">;</span></div></div>`}</code></pre>
      </CodeCopy>
    </div>
    <p><ImgZoom src="/query-performance-improve/image.png" alt="alt text"></ImgZoom></p>
    <p>
      조회된 실행계획을 살펴보면 <code class="inline-code-block">meeting</code>
      테이블을
      <strong>type=ALL</strong>
      로 조회하고 있습니다. (모든 레코드를 조회하는 것)
    </p>
    <InfoBox statusType="info" statusName="type : 데이터를 찾을 방식">
      <ul>
        <li>
          <code class="inline-code-block">ALL</code>
          : 테이블의 모든 행을 스캔합니다. 이는 가장 비효율적인 방법이며, 가능하면 피해야 합니다.
        </li>
        <li>
          <code class="inline-code-block">index</code>
          : 인덱스의 모든 행을 스캔합니다. ALL보다는 좋지만, 여전히 비효율적입니다.
        </li>
        <li>
          <code class="inline-code-block">range</code>
          : 인덱스를 사용하여 특정 범위의 행을 검색합니다. 이는 효율적인 방법이 될 수 있습니다.
        </li>
        <li>
          <code class="inline-code-block">ref</code>
          : 인덱스를 사용하여 특정 행을 검색합니다. 이는 매우 효율적인 방법입니다.
        </li>
        <li>
          <code class="inline-code-block">eq_ref</code>
          : 유일한 인덱스를 사용하여 특정 행을 검색합니다. 이는 가장 효율적인 방법 중 하나입니다. (보통 fk를 사용해서
          조인할 경우)
        </li>
        <li>
          <code class="inline-code-block">const, system</code>
          : 이 방법들은 테이블에 하나의 매칭 행만 있을 때 사용됩니다. 이는 매우 빠르며, 테이블의 행이 메모리에 저장될 수
          있습니다.
        </li>
      </ul>
    </InfoBox>
    <p>모든 레코드를 조회하는 것은 가장 비효율적인 방법이므로 이를 개선하기 위해 인덱스를 사용해보겠습니다.</p>
    <h3 id=""><a href="#">인덱스 생성</a></h3>
    <p>
      먼저 <code class="inline-code-block">meeting</code>
      테이블의
      <code class="inline-code-block">restaurant_category</code>
       컬럼에 인덱스를 생성해보겠습니다.
    </p>
    <div class="code-block titled">
      <h2 class="code-title">restaurant_category 인덱스 생성</h2>
      <CodeCopy>
        <pre><code
            class="language-sql">{@html String.raw`<div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">create</span> <span class="token keyword">index</span> idx_meeting_restaurant_category <span class="token keyword">on</span> meeting<span class="token punctuation">(</span>restaurant_category<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div>`}</code></pre>
      </CodeCopy>
    </div>
    <p>또는 JPA Entity에서 설정해줄 수 있습니다.</p>
    <div class="code-block titled">
      <h2 class="code-title">Meeting.java</h2>
      <CodeCopy>
        <pre><code
            class="language-java">{@html String.raw`<div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token annotation punctuation">@Entity</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token annotation punctuation">@Getter</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token punctuation">(</span>access <span class="token operator">=</span> <span class="token class-name">AccessLevel</span><span class="token punctuation">.</span><span class="token constant">PROTECTED</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>indexes <span class="token operator">=</span> <span class="token punctuation">{</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token annotation punctuation">@Index</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"idx_meeting_restaurant_category"</span><span class="token punctuation">,</span> columnList <span class="token operator">=</span> <span class="token string">"restaurant_category"</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token punctuation">}</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Meeting</span> <span class="token keyword">extends</span> <span class="token class-name">BaseEntity</span> <span class="token punctuation">{</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token comment">// ...</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token punctuation">}</span></div></div>`}</code></pre>
      </CodeCopy>
    </div>
    <p>인덱스를 설정해주고 다시 실행계획을 조회해보겠습니다.</p>
    <p><ImgZoom src="/query-performance-improve/image-1.png" alt="alt text"></ImgZoom></p>
    <p>type이 ref(=const)로 변경된 것을 확인할 수 있고 검색할 양(row)도 줄어든 것을 볼 수 있습니다.</p>
    <p>
      where 조건에서 <code class="inline-code-block">category = PUB</code>
      으로 조회 시 meeting 테이블에서
      <code class="inline-code-block">PUB</code>
      이라는 카테고리를 가진 데이터가
      <strong>7830</strong>
      개가 있고, 이를 인덱스를 통해 조회했습니다.
    </p>
    <div class="code-block">
      <CodeCopy>
        <pre><code
            class="language-sql">{@html String.raw`<div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">show</span> <span class="token keyword">index</span> <span class="token keyword">from</span> meeting<span class="token punctuation">;</span></div></div>`}</code></pre>
      </CodeCopy>
    </div>
    <p>
      위 명령어를 통해 meeting 테이블의 인덱스를 조회해보면 방금 생성해준 <code class="inline-code-block">
        idx_meeting_restaurant_category
      </code>
      인덱스가 생성된 것을 확인할 수 있습니다. 또한 fk 설정 시 해당 테이블들의 id값으로 자동으로 생성해준 인덱스들도
      확인할 수 있습니다. (
      <strong>이 인덱스들은 fk를 사용하여 조인할 경우 사용됩니다</strong>
      )
    </p>
    <p>
      하지만 <code class="inline-code-block">idx_meeting_restaurant_category</code>
      인덱스의
      <code class="inline-code-block">cardinality</code>
      가
      <strong>1</strong>
      로 엄청 낮은 것을 확인할 수 있는데 이건 값들이 크게 다르지 않다는 뜻 입니다. 실제로 프로젝트에서는 카테고리가
      12개밖에 없기 때문에 이렇게 낮은 값이 나온 것입니다.
    </p>
    <p>이런 경우, 오히려 인덱스를 사용하지 않는 것이 더 효율적일 수 있습니다. (더 많은 I/O가 발생할 수 있음)</p>
    <InfoBox statusType="tip" statusName="인덱스 생성 시 고려할 점">
      <p>빠른 검색을 위해 모든 컬럼에 인덱스를 적용하다보면 데이터를 등록,수정할 때마다</p>
      <p>
        정렬을 시도하기 때문에 속도가 느려질 수 있습니다. 따라서, 검색에 자주 사용되는 컬럼에만 인덱스를 적용하는 것이
        좋습니다.
      </p>
    </InfoBox>
    <p>인덱스를 생성한 후, 쿼리의 실행속도를 비교해보겠습니다.</p>
    <ul>
      <li>
        인덱스 설정 전
        <ImgZoom src="/query-performance-improve/image-2.png" alt="alt text"></ImgZoom>
      </li>
      <li>
        인덱스 설정 후
        <ImgZoom src="/query-performance-improve/image-3.png" alt="alt text"></ImgZoom>
      </li>
    </ul>
    <p>
      약 <strong>3배</strong>
       정도의 성능 향상이 있었습니다. (데이터가 많을수록 더 큰 차이가 날 수 있습니다)
    </p>
    <p>
      추가로 <strong>최신순 정렬</strong>
      을 하기 위해 order by를 사용했는데, 이 부분도
      <code class="inline-code-block">created_at</code>
       컬럼에 인덱스를 생성해주면 더 효율적일 수 있습니다.
    </p>
    <p>(저희 프로젝트에서는 created_at을 대부분 desc로 조회하기 때문에 인덱스 순서를 desc로 설정해주었습니다.)</p>
    <div class="code-block titled">
      <h2 class="code-title">created_at 인덱스 생성</h2>
      <CodeCopy>
        <pre><code
            class="language-sql">{@html String.raw`<div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">create</span> <span class="token keyword">index</span> idx_meeting_created_at <span class="token keyword">on</span> meeting<span class="token punctuation">(</span>created_at <span class="token keyword">desc</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div>`}</code></pre>
      </CodeCopy>
    </div>
    <p>또는 JPA Entity에서 설정해줄 수 있습니다.</p>
    <div class="code-block titled">
      <h2 class="code-title">Meeting.java</h2>
      <CodeCopy>
        <pre><code
            class="language-java">{@html String.raw`<div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token annotation punctuation">@Entity</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token annotation punctuation">@Getter</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token punctuation">(</span>access <span class="token operator">=</span> <span class="token class-name">AccessLevel</span><span class="token punctuation">.</span><span class="token constant">PROTECTED</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>indexes <span class="token operator">=</span> <span class="token punctuation">{</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token annotation punctuation">@Index</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"idx_meeting_created_at"</span><span class="token punctuation">,</span> columnList <span class="token operator">=</span> <span class="token string">"created_at desc"</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token punctuation">}</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Meeting</span> <span class="token keyword">extends</span> <span class="token class-name">BaseEntity</span> <span class="token punctuation">{</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token comment">// ...</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token punctuation">}</span></div></div>`}</code></pre>
      </CodeCopy>
    </div>
    <p>
      이제 meeting 테이블에는 <code class="inline-code-block">restaurant_category</code>
      와
      <code class="inline-code-block">created_at</code>
       컬럼에 인덱스가 생성되었습니다.
    </p>
    <p>다시 쿼리의 실행속도를 비교해보겠습니다.</p>
    <ul>
      <li>
        restaurant_category, created_at 인덱스 설정
        <ImgZoom src="/query-performance-improve/image-4.png" alt="alt text"></ImgZoom>
      </li>
      <li>
        created_at에만 인덱스 설정
        <ImgZoom src="/query-performance-improve/image-5.png" alt="alt text"></ImgZoom>
      </li>
    </ul>
    <p>
      의아한 점은 <code class="inline-code-block">restaurant_category</code>
      와
      <code class="inline-code-block">created_at</code>
      컬럼에 인덱스를 생성한 것보다
      <code class="inline-code-block">created_at</code>
      에만 인덱스를 생성한 것이 더 빠른 속도를 보였습니다. 이는
      <code class="inline-code-block">restaurant_category</code>
      컬럼의
      <code class="inline-code-block">cardinality</code>
      가 낮아서 인덱스를 사용하지 않는 것이 더 효율적이었기 때문인지는 모르겠지만
      <code class="inline-code-block">created_at</code>
      컬럼에만 인덱스를 생성하는 게 더 빠른 속도를 보여주기 때문에 저는
      <code class="inline-code-block">restaurant_category</code>
       컬럼에는 인덱스를 생성하지 않기로 결정했습니다.
    </p>
    <h3 id=""><a href="#">서브 쿼리 사용</a></h3>
    <p>
      현재 최적화 전 쿼리를 보면, <code class="inline-code-block">region</code>
      테이블을 조인하여
      <code class="inline-code-block">name</code>
       컬럼을 조회하고 있습니다.
    </p>
    <div class="code-block titled">
      <h2 class="code-title">최적화 전 쿼리</h2>
      <CodeCopy>
        <pre><code
            class="language-sql">{@html String.raw`<div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">select</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token comment">/* ... */</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">from</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    meeting m1_0</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">left</span> <span class="token keyword">join</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    tasty_restaurant tr1_0</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">on</span> tr1_0<span class="token punctuation">.</span>id<span class="token operator">=</span>m1_0<span class="token punctuation">.</span>tasty_restaurant_id</div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">join</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    region r1_0</div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">on</span> r1_0<span class="token punctuation">.</span>id<span class="token operator">=</span>m1_0<span class="token punctuation">.</span>region_id</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">where</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    m1_0<span class="token punctuation">.</span>restaurant_category<span class="token operator">=</span><span class="token string">'PUB'</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">  <span class="token operator">and</span> r1_0<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'강남구'</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"><span class="token keyword">order</span> <span class="token keyword">by</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    m1_0<span class="token punctuation">.</span>created_at <span class="token keyword">desc</span><span class="token punctuation">;</span></div></div>`}</code></pre>
      </CodeCopy>
    </div>
    <p>
      where 조건에서 <code class="inline-code-block">region</code>
      의
      <code class="inline-code-block">name</code>
      컬럼을 조회하는 것은
      <strong>서브쿼리</strong>
      를 사용하여 최적화할 수 있습니다.
    </p>
    <div class="code-block titled">
      <h2 class="code-title">서브쿼리 사용 전 코드</h2>
      <CodeCopy>
        <pre><code
            class="language-java">{@html String.raw`<div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token annotation punctuation">@Override</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">public</span> <span class="token class-name">Slice</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MeetingListResponse</span><span class="token punctuation">></span></span> <span class="token function">findMeetingList</span><span class="token punctuation">(</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">            <span class="token class-name">RestaurantCategory</span> category<span class="token punctuation">,</span> <span class="token class-name">String</span> regionName<span class="token punctuation">,</span> <span class="token class-name">Pageable</span> pageable</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token class-name">BooleanBuilder</span> condition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BooleanBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        condition<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>meetingOptions<span class="token punctuation">.</span>status<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">MeetingStatus</span><span class="token punctuation">.</span><span class="token constant">BEFORE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">if</span> <span class="token punctuation">(</span>category <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">            condition<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>restaurantCategory<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>category<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token punctuation">}</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">if</span> <span class="token punctuation">(</span>regionName <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">            condition<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>region<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>regionName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token punctuation">}</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MeetingListResponse</span><span class="token punctuation">></span></span> meetingList <span class="token operator">=</span> queryFactory<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token function">meetingListProjection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>meeting<span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>host<span class="token punctuation">,</span> member<span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">leftJoin</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>tastyRestaurant<span class="token punctuation">,</span> tastyRestaurant<span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>createdAt<span class="token punctuation">.</span><span class="token function">desc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>pageable<span class="token punctuation">.</span><span class="token function">getOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>pageable<span class="token punctuation">.</span><span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SliceUtil</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>meetingList<span class="token punctuation">,</span> pageable<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSlice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token punctuation">}</span></div></div>`}</code></pre>
      </CodeCopy>
    </div>
    <p>현재 코드에서는 region 테이블의 name 필드를 기반으로 meeting 테이블을 조회하고 있습니다.</p>
    <p>
      이러면 meeting 테이블의 <code class="inline-code-block">region_id</code>
       인덱스를 활용하지 못하고 전체 레코드를 조회하게 됩니다.
    </p>
    <p>
      이를 해결하기 위해, <strong>서브쿼리</strong>
      를 사용하여 최적화할 수 있습니다.
    </p>
    <ul>
      <li>
        서브쿼리 내용 : 인자로 받은 regionName을 통해 region 테이블의 id를 먼저 조회하고, 이 id를 사용하여 meeting
        테이블을 조회 (meeting 테이블의 region_id 인덱스를 활용)
      </li>
    </ul>
    <div class="code-block titled">
      <h2 class="code-title">서브쿼리 사용 후 코드</h2>
      <CodeCopy>
        <pre><code
            class="language-java">{@html String.raw`<div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token annotation punctuation">@Override</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">public</span> <span class="token class-name">Slice</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MeetingListResponse</span><span class="token punctuation">></span></span> <span class="token function">findMeetingList</span><span class="token punctuation">(</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">            <span class="token class-name">RestaurantCategory</span> category<span class="token punctuation">,</span> <span class="token class-name">String</span> regionName<span class="token punctuation">,</span> <span class="token class-name">Pageable</span> pageable</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token class-name">BooleanBuilder</span> condition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BooleanBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        condition<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>meetingOptions<span class="token punctuation">.</span>status<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">MeetingStatus</span><span class="token punctuation">.</span><span class="token constant">BEFORE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">if</span> <span class="token punctuation">(</span>category <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">            condition<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>restaurantCategory<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>category<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token punctuation">}</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">if</span> <span class="token punctuation">(</span>regionName <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">            condition<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>region<span class="token punctuation">.</span>id<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                    <span class="token class-name">JPAExpressions</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                            <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>region<span class="token punctuation">.</span>id<span class="token punctuation">)</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                            <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>region<span class="token punctuation">)</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                            <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>region<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>regionName<span class="token punctuation">)</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                            <span class="token punctuation">)</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">            <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token punctuation">}</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MeetingListResponse</span><span class="token punctuation">></span></span> meetingList <span class="token operator">=</span> queryFactory<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token function">meetingListProjection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>meeting<span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>host<span class="token punctuation">,</span> member<span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">leftJoin</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>tastyRestaurant<span class="token punctuation">,</span> tastyRestaurant<span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>createdAt<span class="token punctuation">.</span><span class="token function">desc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>pageable<span class="token punctuation">.</span><span class="token function">getOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>pageable<span class="token punctuation">.</span><span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SliceUtil</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>meetingList<span class="token punctuation">,</span> pageable<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSlice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token punctuation">}</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token annotation punctuation">@Override</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">public</span> <span class="token class-name">Slice</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MeetingListResponse</span><span class="token punctuation">></span></span> <span class="token function">searchMeetings</span><span class="token punctuation">(</span><span class="token class-name">String</span> term<span class="token punctuation">,</span> <span class="token class-name">Pageable</span> pageable<span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token class-name">BooleanBuilder</span> condition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BooleanBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        condition<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">containsIgnoreCase</span><span class="token punctuation">(</span>term<span class="token punctuation">)</span> <span class="token comment">// LIKE %term%</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span>tastyRestaurant<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">containsIgnoreCase</span><span class="token punctuation">(</span>term<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// LIKE %term%</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MeetingListResponse</span><span class="token punctuation">></span></span> meetingSearchResponses <span class="token operator">=</span> queryFactory</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token function">meetingListProjection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>meeting<span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">leftJoin</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>tastyRestaurant<span class="token punctuation">,</span> tastyRestaurant<span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span>meeting<span class="token punctuation">.</span>createdAt<span class="token punctuation">.</span><span class="token function">desc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>pageable<span class="token punctuation">.</span><span class="token function">getOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>pageable<span class="token punctuation">.</span><span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                <span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content"></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SliceUtil</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>meetingSearchResponses<span class="token punctuation">,</span> pageable<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSlice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token punctuation">}</span></div></div>`}</code></pre>
      </CodeCopy>
    </div>
    <p>
      위 코드에서 <code class="inline-code-block">regionName</code>
      을 통해
      <code class="inline-code-block">region</code>
      테이블의
      <code class="inline-code-block">id</code>
      를 조회하는 서브쿼리를 사용하여 최적화했습니다.
    </p>
    <p>위 코드로 실행되는 쿼리는 아래와 같습니다.</p>
    <div class="code-block">
      <CodeCopy>
        <pre><code
            class="language-sql">{@html String.raw`<div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">select</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token comment">/* ... */</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">from</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        meeting m1_0 </div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">left</span> <span class="token keyword">join</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        tasty_restaurant tr1_0 </div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">            <span class="token keyword">on</span> tr1_0<span class="token punctuation">.</span>id<span class="token operator">=</span>m1_0<span class="token punctuation">.</span>tasty_restaurant_id </div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">join</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        region r1_0 </div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">            <span class="token keyword">on</span> r1_0<span class="token punctuation">.</span>id<span class="token operator">=</span>m1_0<span class="token punctuation">.</span>region_id </div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">where</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        m1_0<span class="token punctuation">.</span><span class="token keyword">status</span><span class="token operator">=</span>? </div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token operator">and</span> m1_0<span class="token punctuation">.</span>region_id<span class="token operator">=</span><span class="token punctuation">(</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">            <span class="token keyword">select</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                r2_0<span class="token punctuation">.</span>id </div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">            <span class="token keyword">from</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                region r2_0 </div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">            <span class="token keyword">where</span></div></div><div class="code-line line-highlight"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">                r2_0<span class="token punctuation">.</span>name<span class="token operator">=</span>?</div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        <span class="token punctuation">)</span> </div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">    <span class="token keyword">order</span> <span class="token keyword">by</span></div></div><div class="code-line"><div class="code-linenotation"><span class="no-line-number"></span><span class="no-line-diff"></span></div><div class="code-content">        m1_0<span class="token punctuation">.</span>created_at <span class="token keyword">desc</span> </div></div>`}</code></pre>
      </CodeCopy>
    </div>
    <p>쿼리 실행속도는 큰 차이는 없었지만, 조~~금 속도가 향상된 것을 확인할 수 있었습니다.</p>
    <h3 id=""><a href="#">결과</a></h3>
    <p>
      최종적으로 최적화를 통해 쿼리의 실행속도를 <strong>4배</strong>
       정도 향상시킬 수 있었습니다.
    </p>
    <ul>
      <li>
        처음
        <ImgZoom src="/query-performance-improve/image-2.png" alt="alt text"></ImgZoom>
      </li>
      <li>
        최종
        <ImgZoom src="/query-performance-improve/image-5.png" alt="alt text"></ImgZoom>
      </li>
    </ul>
    <h1 id=""><a href="#">마무리</a></h1>
    <p>쿼리 성능을 향상시키기 위해 인덱스를 생성하고 서브쿼리를 사용하는 방법에 대해 알아보았습니다.</p>
    <p>
      쿼리 성능을 향상시키기 위해 다양한 방법을 사용할 수 있지만, 가장 중요한 것은 <strong>실행계획</strong>
      을 확인하고 상황마다 쿼리 성능을 향상시키기 위한 방법이 다르기 때문에, 상황에 맞게 적용해보는 것이 중요하다는 것을
      알 수 있었습니다.
    </p>
    <p>긴 글 읽어주셔서 감사합니다. 😊</p>
  </article>
</Post>
